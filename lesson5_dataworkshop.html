<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Workshop : manipulating data 2/2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Timothée Gidoin" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/sciencespo.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/sciencespo-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Workshop : manipulating data 2/2
## Data and Algorithms for Public Policy
### Timothée Gidoin
### Sciences Po, 2019-10-21

---


layout: true

&lt;style&gt;
.remark-slide-number {
  position: inherit;
}

.remark-slide-number .progress-bar-container {
  position: absolute;
  bottom: 0;
  height: 5px;
  display: block;
  left: 0;
  right: 0;
}

.remark-slide-number .progress-bar {
  height: 100%;
  background-color: #14e6cd;
}

&lt;/style&gt;


&lt;div class='my-footer'&gt;&lt;span&gt;Data and Algorithms for Public Policy - Lesson 5 "Workshop 2 - manipulating data"&lt;/span&gt; &lt;center&gt;&lt;div class=logo&gt;&lt;img src='https://newsroom.sciencespo.fr/wp-content/uploads/2017/11/827693-297x109.png' width='100px'&gt;&lt;/center&gt;&lt;/span&gt;&lt;/div&gt;

---
## Before we start

&lt;BR&gt;

Slides : https://gidoin.github.io/sciencespodata/lesson5_dataworkshop.html

Sources : https://github.com/Gidoin/sciencespodata/

This production is freely reusable under the terms of the licence  [Creative Commons 4.0 BY-SA](https://creativecommons.org/licenses/by-sa/4.0/legalcode.fr).

.center[*The content of this presentation is partly inspired by other presentations made by Datactivist team. I warmly thank them and notably [Joël Gombin](https://twitter.com/joelgombin) for his help.*]

&lt;BR&gt;

.center[&lt;img src="./img/ccbysa.png" height="100"/&gt;] 

---
## Before we start: reminder

.center[&lt;img src="./img/agendascpo.png" height="400"/&gt;]

---
## Before we start: reminder

- **Midterm Exam** : 
  - **25% of your total grade** 
  - By group of .red[2 students] 
  - Data manipulation, analysis visualisation exercise based on open data
  - To be submitted before .red[25/10] 11:59 pm

**Instructions** :
- You are a policy advisor working in a cabinet (*you select the Ministry and country you want*) and you need data to advise properly your Director of cabinet regarding a new public policy to design
- Due to the emergency of the situation - The Minister has a general policy speech in the Parliament in 5 days where he will detail its policy roadmap, and your policy recommandation may be included - you can't wait to get internal files or data coming from the administration  
- Thus, you can only use open data as any other common citizen !

---
class: inverse, center, middle

## SO EXCITING !

.center[&lt;img src="https://media.giphy.com/media/nNxT5qXR02FOM/giphy.gif" height="400"/&gt;]

  
---
## Before we start: reminder

**Instructions** :
  
- Find an interesting dataset opened by govt or local authorities or public companies (not necessary a French one). Topics : fiscality, education, R&amp;D...
- Analyze the data through pivot table or some functions we covered 
- Cross the data with another open dataset to enrich them and strenghten your analysis (vlookup / index.match). 
- Analyze your results and produce a graph or a map (Khartis) displaying the key results
- .red[Bonus] : provide a real policy recommandation based on your results (if relevant)
- Explain the limits of the data you worked with (quality, scope, granularity..) and the data you would have needed to improve your work
  
You will write a 2-pages (graph/map included) note, **.red[1]** page of annex **MAX** allowed, for your Head of cabinet with the main result you got by analysing this data, a draft of a public policy based on this data (it doesn't need to be original, just consistent), the limits of your analysis and data needed to strenghten it. **Send attached the CSV/XLS files you worked with**

---
## Before we start: reminder

- **Final Exam** : 
  - **75% of your total grade**
  - By group of .red[4 students]
  - 10-pages paper on the analysis of 3 uses cases (outside France) in one of the following topics: social benefits, police / justice, education, public sector human
resources
  - 1 oral presentation (15 min) during the last session 
  - 1 Medium blog post (1,5 pages) to present your findings
  - Evaluation of final exam: 50% quality of the analysis, 25% oral presentation, 25%
quality of Medium blogpost

- 5 topics :
  - **Social action / social benefits**
  - **Police, justice, law enforcement**
  - **Education**
  - **Public sector human resources management**
  - **Health**

---
## Before we start: Final exam

You decided last session of the "algorithm" of groups composition and of topics repartition for the final exam :
- You constitute by yourselves your group (5 students, at least 1 French student &amp; 1 foreign student in each group)
- You decide by yourselves the [selected topic](https://docs.google.com/spreadsheets/d/1sa9vD6WNLr-9FwTPhrBdN2WXJtrZcS7DDWOToYRM9Rc/edit#gid=0)

.center[&lt;img src="./img/groupfinalexam.png" height="320"/&gt;]

---
class: inverse, center, middle

## Let's go back to data

.center[&lt;img src="https://media.giphy.com/media/2eLAwdushm3cI/giphy.gif" height="400"/&gt;]

---
## Data manipulation through spreadsheet : Vlookup

- ISF data are interesting but there is one key variable missing...

--

**population** !

- Find and download a dataset enabling you to get demographic data given city per city 

- Look at its structure and select the variables / columns that you want

- Open a now tab in your ISF spreadsheet, copy/paste the columns from your tab "patrimoine" and add a new column where you will collect the number of inhabitants associated to each city that have ISF taxpayers. For this, you need to use the function *rechercheV* / *Vlookup*

---
## Data manipulation through spreadsheet : Index&amp;match


- Interesting, but not sufficient to compare the ISF paid per inhabitants, why ?

--

- Now you want to create a new column with only the number of adult inhabitants (&gt;= 18) per city

- First create a column that sums the pop &gt; 18 in each city

- Then, instead of vlookup function (also functioning), use **index&amp;match** or index/equiv (*in French*)

--

- Now you can get the ratio of number of adult inhabitants that were ISF licence payers 

+ What are the cities/districts with the highest proportion of adult ISF payers ?

--

Paris 07, Neuilly, Paris 06, Paris 08...

---
## Data manipulation through spreadsheet : Index&amp;match

.center[&lt;img src="./img/ratioisf.png" height="200"/&gt;]

+ How many cities of more than 20 000 inhabitant don't have at least 50 ISF payers ?

--

More than 100 

+ What are the biggest French cities (Dom Tom excl) that don't have at least 50 ISF payers ?

--

Évry-Courcouronnes, Venissieux, Sarcelles..


---
## Data manipulation through spreadsheet : pivot table

- Open a new tab

- Insert a *pivot table* / *tableau croisé dynamique* based on the scope of the data where you have all your previous columns

- Insert in your pivot each variable and split them this way :
+ Filters : Pop+20y / Cities / Departments / Pop
+ Lines : Region
+ Value : Sum of number of ISF taxpayers / Average Property / Average ISF paid / % of adult ISF taxpayer

- Filter by removing Guadeloupe, Réunion, Martinique

---
## Data manipulation through spreadsheet : pivot table

You should get the following pivot table :

.center[&lt;img src="./img/tcd2.png" height="350" /&gt;]

---
## Data manipulation through spreadsheet : pivot table

And the following pivot graph :

.center[&lt;img src="./img/gcd3.png" height="350" /&gt;]

---
## Data manipulation through spreadsheet : pivot table

You can create as many graphs as you want, so amazing !

.center[&lt;img src="./img/gcd4.png" height="350" /&gt;]

---
## Data manipulation through spreadsheet : pivot table

.center[&lt;img src="https://media.giphy.com/media/3ztiZa4eICWGs/giphy-downsized-large.gif" height="400"/&gt;]

---
class:center, middle, inverse

## Coffee break : 5 minutes \o/

---
class:center, middle, inverse

# Datavisualisation

---
## Missing Migrants Project


- Missing Migrants project, led par the IOM, UN agency, records every known incidents that imply migrants that are missing or that died through their migration

- IOM **agregates in one public database different sources of information** (fishermen, NGOs, media, coastguards...) and add a "source quality" note to assess the reliability of the source

- This work of census by an international organisation allows to give credit to the statistics collected and to shed the light on this issue. This is a way to **raise awareness among the public opinon and to make it political**. Collecting data is often necessary to quantify an issue if we want it to be taken into account in the public debate

- Illegal imigration is not the only topic where it doesn't exist any official statistics. See "**missing number projects**" for more examples (homeless persons, number of suicides in some professions...).

.footnote[[*Missing Migrants Projects*](https://missingmigrants.iom.int/)]

---
## Missing Migrants Project

&gt; Être ignoré de la statistique, c’est être exclu de la cité, de la citoyenneté // Being ignored by statistics means being excluded by the society, by the citizenship

Maryse Marpsat, statistician and sociologist (INED)

**Not collecting data, is a very political decision**

&gt; EU state members document thoroughly the situation of their own population and the entrance in their territory of foreign citizens but, in their own statistical process, they don't care about people died by tempting to cross their borders. **By ometting to count those deaths, they condemn them to invisibility.**

Antoine Pécoud, sociologist

But is OIM, by counting missing migrants, such a do-gooder ? Some experts consider that, in fact, this work supports government.. 
[A French research article on the topic](https://www.cairn.info/revue-europeenne-des-migrations-internationales-2017-2-page-63.htm#)

---
## Missing Migrants Project

.center[&lt;img src="./img/missingmigrants.png" height="400"/&gt;]

.footnote[[*Missing Migrants Projects*](https://missingmigrants.iom.int/)]

---

## Practical exercice : missing migrants

- Download OIM Missing migrants dataset

.center[&lt;img src="./img/missingmigrants2.png" height="400"/&gt;]

---

## Practical exercice : missing migrants

- Create a pivot table and dynamic pivot graphic

.center[&lt;img src="./img/gcdoim.png" height="400"/&gt;]

---

## Practical exercice : missing migrants

- Once your data are cleaned, go on [RawGraphs](https://rawgraphs.io/)

.center[&lt;img src="./img/rawgraphs.png" height="400"/&gt;]

---

## Practical exercice : missing migrants


.center[&lt;img src="./img/missingmigrants1.png" height="400"/&gt;]

---
## Missing numbers : a blog dedicated to missing data

.center[&lt;img src="./img/missingnumbers.png" height="370"/&gt;]

.footnote[[Missing numbers](https://missingnumbers.org/)]

---
## Dataviz : other ressources

.center[[&lt;img src="./img/dataviz.png" height="500"/&gt;](https://datactivist.coop/dataweek/dataviz/#1)]

---
class: inverse, center, middle

# Mapping data

---
## Mapping data through Khartis

Represent in Khartis the number of ISF tax payer (per city) in Ile-de-France in 2017

.center[&lt;img src="./img/redevables.png" height="350"/&gt;] 

---
## So happyyyyy togetheeeeer !

.center[&lt;img src="https://media.giphy.com/media/yoJC2GnSClbPOkV0eA/giphy.gif" height="400"/&gt;]

---
class: inverse, center, middle

## Thank you !

Contact : [timothee.gidoin@sciencespo.fr](mailto:timothee.gidoin@sciencespo.fr)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "<div class=\"progress-bar-container\">   <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">   </div> </div> "
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
